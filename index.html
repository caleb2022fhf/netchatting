<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Account Check</title>
  <style>
    body {
      background: #f5f5f5;
      font-family: Arial, sans-serif;
      display: flex;
      align-items: center;
      justify-content: center;
      height: 100vh;
      margin: 0;
    }
    .box {
      background: white;
      padding: 24px;
      border-radius: 8px;
      width: 360px;
      box-shadow: 0 6px 18px rgba(0,0,0,0.08);
      text-align: center;
    }
    .btn { display:block; width:100%; padding:10px; margin-top:10px; border-radius:6px; border:none; cursor:pointer; }
    .btn-primary { background:#007bff; color:#fff; }
    .btn-secondary { background:#28a745; color:#fff; }
    .btn-link { background:none; color:#007bff; text-decoration:underline; }
  </style>
</head>
<body>

<div class="box" id="box">
  <h2>Checking account...</h2>
  <p id="message">Please wait while we verify your credentials.</p>

  <button id="createBtn" class="btn btn-secondary" style="display:none;">Create account</button>
  <button id="backBtn" class="btn btn-link" style="display:none;">Back to Login</button>
</div>

<script>
  window.addEventListener('DOMContentLoaded', function() {
    const messageEl = document.getElementById('message');
    const createBtn = document.getElementById('createBtn');
    const backBtn = document.getElementById('backBtn');

    // Retrieve the login attempt and registered users
    const attemptRaw = localStorage.getItem('loginAttempt');
    const users = JSON.parse(localStorage.getItem('users')) || [];

    if(!attemptRaw) {
      // No attempt found — show friendly message and link back to login
      messageEl.textContent = "No login attempt found. Please go back to the login page and enter your email and PIN.";
      showBack();
      return;
    }

    const attempt = JSON.parse(attemptRaw);
    const found = users.find(u => u.email === attempt.email && u.password === attempt.password);

    // Clear the temporary attempt after checking
    localStorage.removeItem('loginAttempt');

    if(found) {
      // Account exists — confirm and redirect to post-login page
      messageEl.textContent = "Account found. Redirecting you now...";
      // small delay so user sees the message
      setTimeout(() => {
        // Replace with your actual post-login page
        window.location.href = 'Untitled-5.html';
      }, 900);
    } else {
      // Not found — show options to create account or go back
      messageEl.textContent = "No account found with those credentials.";
      showCreate();
    }

    function showCreate() {
      createBtn.style.display = 'block';
      backBtn.style.display = 'block';
      createBtn.addEventListener('click', () => {
        // Go to your create-account page
        window.location.href = 'Untitled-3.html'; // if this page is also the create page, change accordingly
        // If your create-account page is a different file, set that filename here.
      });
      backBtn.addEventListener('click', () => {
        window.location.href = 'index.html'; // change to your login page filename if different
      });
    }

    function showBack() {
      backBtn.style.display = 'block';
      backBtn.addEventListener('click', () => {
        window.location.href = 'index.html';
      });
    }
  });
</script>

</body>
</html>
